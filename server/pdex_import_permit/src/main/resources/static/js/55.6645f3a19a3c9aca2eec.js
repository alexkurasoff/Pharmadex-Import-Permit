(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=u(n(26)),l=u(n(9)),i=u(n(12));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"pureGetDownload",value:function(e){var t=document.createElement("a");t.href=i.default.contextPath()+e,t.id="idoftemporarydownloadlink",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},{key:"postDownload",value:function(e,t,n){this.isIE()?this.downloadIE(i.default.contextPath()+e,t,n,!0):this.downloadRest(i.default.contextPath()+e,t,n,!0)}},{key:"getDownload",value:function(e,t){this.isIE()?this.downloadIE(e,"","unknown.qtb",!1):this.downloadRest(e,"","unknown.qtb",!1)}},{key:"isIE",value:function(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1}},{key:"downloadIE",value:function(e,t,n,o){var i=this;r.default.show();(o?this.callPostFetch(e,t):this.callGetFetch(e)).then((function(e){return i.filename=e.headers.get("filename"),e.blob()})).then((function(e){void 0!==e?(void 0===a(i.filename)&&(i.filename=n),r.default.hide(),window.navigator.msSaveOrOpenBlob(e,i.filename)):i.pureGetDownload()})).catch((function(e){r.default.hide(),"OK"!=e&&l.default.show(e,3)}))}},{key:"callPostFetch",value:function(e,t){var n=t;return fetch(e,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}},{key:"callGetFetch",value:function(e){return fetch(e,{credentials:"include"})}},{key:"downloadRest",value:function(e,t,n,a){var o=this;r.default.show();(a?this.callPostFetch(e,t):this.callGetFetch(e)).then((function(e){return o.filename=e.headers.get("filename"),void 0===o.filename&&(o.filename=n),e.body})).then((function(t){if(void 0!==t){var n=t.getReader();return new ReadableStream({start:function(e){return function t(){return n.read().then((function(n){var a=n.done,o=n.value;if(!a)return e.enqueue(o),t();e.close()}))}()}})}o.pureGetDownload(e)})).then((function(e){return new Response(e)})).then((function(e){return e.blob()})).then((function(e){return URL.createObjectURL(e)})).then((function(e){r.default.hide(),o.downloadFile(e)})).catch((function(e){r.default.hide(),"OK"!=e&&l.default.show(e,3)}))}},{key:"downloadFile",value:function(e){void 0===this.filename&&(this.filename=this.filename);var t=document.createElement("a");t.style.display="none",t.href=e,t.setAttribute("download",this.filename),void 0===t.download&&t.setAttribute("target","_blank"),document.body.appendChild(t),t.click(),document.body.removeChild(t),setTimeout((function(){window.URL.revokeObjectURL(e)}),100)}}]),e}();t.default=s},145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),r=s(o),l=s(n(0)),i=n(11),u=s(n(12));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a="",o=e.table.headers.headers;return u.default.isGoodArray(o)&&o.forEach((function(e){e.generalCondition.length>0&&(a=e.generalCondition)})),n.state={commonFilter:a},n.searchText=n.searchText.bind(n),n.applyFilters=n.applyFilters.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"searchText",value:function(e){var t=e.target.value,n=this.state;t.length>this.props.table.searchTreshold?this.applyFilters(t):this.state.commonFilter.length>this.props.table.searchTreshold&&this.applyFilters(t),n.commonFilter=t,this.setState(n)}},{key:"applyFilters",value:function(e){var t=this,n=this.props.table.headers;n.page=1,u.default.isGoodArray(n.headers),n.headers.forEach((function(n){n.filterAllowed&&(e.length>t.props.table.searchTreshold?n.generalCondition=e:n.generalCondition="")})),this.props.loader()}},{key:"render",value:function(){var e=this;return r.default.createElement(i.Input,{className:"form-control",id:"search_text",bsSize:"sm",placeholder:this.props.label,type:"text",name:"search_text",value:this.state.commonFilter,disabled:this.props.disabled,onChange:function(t){return e.searchText(t)}})}}]),t}(o.Component);t.default=c,c.propTypes={label:l.default.string.isRequired,table:l.default.object.isRequired,loader:l.default.func.isRequired,disabled:l.default.bool}},63:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),r=h(o),l=n(11),i=h(n(18)),u=h(n(27)),s=h(n(12)),c=h(n(145)),f=h(n(114)),d=h(n(116));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={data:{table:{headers:{},rows:[]}},labels:{search:"Search",exportExcel:"Export to Excel"}},n.loadData=n.loadData.bind(n),n.excelTable=n.excelTable.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){i.default.resolveLabels(this),this.loadData()}},{key:"loadData",value:function(){var e=this;s.default.postJSON("/api/notifications/list",this.state.data,(function(t,n){e.state.data=n,e.setState(e.state.data)}))}},{key:"excelTable",value:function(){(new d.default).postDownload("/api/notifications/list/excel",this.state.data,"notifications.xlsx")}},{key:"render",value:function(){var e=this;return r.default.createElement(l.Card,{style:{fontSize:"0.8rem"}},r.default.createElement(l.CardHeader,null,r.default.createElement(l.Row,null,r.default.createElement(l.Col,{xs:"12",sm:"12",lg:"2",xl:"2"},r.default.createElement(c.default,{label:this.state.labels.search,table:this.state.data.table,loader:this.loadData})),r.default.createElement(l.Col,{xs:"12",sm:"12",lg:"8",xl:"8",className:"text-center"}),r.default.createElement(l.Col,{xs:"12",sm:"12",lg:"2",xl:"2",className:"d-flex justify-content-right"},r.default.createElement(l.Button,{className:"btn-block",size:"sm",outline:!0,color:"primary",onClick:this.excelTable},this.state.labels.exportExcel)))),r.default.createElement(l.CardBody,null,r.default.createElement(f.default,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({tableData:this.state.data.table,pagerProcessor:this.pagerProcessor,styleCorrector:this.widthMaster,loader:this.loadData,headBackground:"#0099cc",linkProcessor:function(t,n){var a={tabSet:u.default.tabSetName(),row:e.state.data.table.rows[t]};s.default.postJSONNoSpinner("/api/notifications/link",a,(function(e,t){u.default.navigate(t.tab,t.component,t.params)}))}},"styleCorrector",(function(e){if("subject"==e)return{width:"40%"}})))))}}]),t}(o.Component);t.default=p}}]);